<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright Nova Code (http://www.novacode.nl)
See LICENSE file for full licensing details. -->

<odoo>
    <template id="formio_builder_embed" name="Form.io Builder - Embed">
        <html>
            <head>
                <t t-call-assets="web.assets_common" t-css="false"/>

                <t t-foreach="formio_css_assets" t-as="css">
                    <link rel="stylesheet" type="text/css" t-att-href="css.url"/>
                </t>
                <t t-foreach="formio_js_assets" t-as="js">
                    <script type="text/javascript" t-att-src="js.url"></script>
                </t>
                <script type="text/javascript" src="/formio/static/src/js/odoo-formio-builder.js"/>
            </head>
            <body style="width: 95%">
                <div id="formio_builder_container">
                    <div id="formio_builder"></div>
                </div>
                <input type="hidden" id="builder_id" name="builder_id" t-att-value="builder.id"/>
            </body>
        </html>
    </template>

    <template id="formio_builder" name="Form.io Builder">
        <t t-call="web.layout">
            <t t-set="head">
                <t t-call="formio.formio_html_head"/>
            </t>

            <t t-call="formio.formio_menu_nav">
                <t t-set="items_menu_systray">
                    <li t-if="builder" id="edit-in-backend">
                        <a t-attf-href="#{builder.act_window_url}"><span class="fa fa-cog"/> Form Builder</a>
                    </li>
                </t>
            </t>

            <t t-call="formio.formio_header"/>
            
            <div id="wrapwrap">
                <main class="container-fluid">
                    <div class="container mt16 mb16">
                        <div class="row">
                            <div class="col-md-6">
                                <h3 class="formio_builder_name"><t t-esc="builder.title"/><small> - (<t t-esc="builder.name"/>)</small></h3>
                            </div>
                            <div class="col-md-6 mt8">
                                <span class="float-right pull-right" style="margin-left: 12px;">
                                    <span class="text-muted">Version: <span class="text-muted" t-field="builder.version"/></span>
                                </span>
                                <strong class="float-right pull-right">
                                    <span class="text-muted">State: <span class="text-muted" t-field="builder.state"/></span>

                                </strong>
                            </div>
                        </div>
                    </div>
                    <div id="formio_builder_container" class="embed-responsive embed-responsive-21by9">
                        <iframe t-attf-src="/formio/builder/embed/#{builder.id}" class="embed-responsive-item"/>
                    </div>
                </main>
            </div>
        </t>
    </template>
</odoo>
